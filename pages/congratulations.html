<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>F√©licitations - FORNAP</title>
    
    <!-- CSS -->
    <link rel="stylesheet" href="../assets/css/main.css">
    <link rel="stylesheet" href="../assets/css/components.css">
</head>
<body>
    <!-- Placeholder pour la navbar - sera remplac√©e par le composant -->
    <div id="navbar-placeholder"></div>

    <!-- ========================================
         CONTENU PRINCIPAL
         ======================================== -->
    <main class="main-content">
        
        <!-- Section F√©licitations -->
        <section class="congratulations-section">
            <div class="container">
                <div class="congratulations-container">
                    
                    <!-- Animation de succ√®s -->
                    <div class="success-animation">
                        <div class="success-circle">
                            <div class="success-checkmark">‚úì</div>
                        </div>
                    </div>

                    <!-- Message principal -->
                    <div class="congratulations-content">
                        <h1 class="congratulations-title">F√©licitations !</h1>
                        <p class="congratulations-subtitle">
                            Votre adh√©sion FORNAP a √©t√© confirm√©e avec succ√®s
                        </p>

                        <!-- Informations de l'adh√©sion -->
                        <div class="membership-info" id="membershipInfo">
                            <!-- Contenu g√©n√©r√© dynamiquement -->
                        </div>

                        <!-- √âtapes suivantes -->
                        <div class="next-steps">
                            <h3>Que se passe-t-il maintenant ?</h3>
                            
                            <div class="steps-grid">
                                <div class="step-card">
                                    <div class="step-icon">üìß</div>
                                    <div class="step-content">
                                        <h4>Email de confirmation</h4>
                                        <p>Vous allez recevoir un email avec votre carte membre virtuelle et toutes les informations importantes.</p>
                                    </div>
                                </div>
                                
                                <div class="step-card">
                                    <div class="step-icon">üë§</div>
                                    <div class="step-content">
                                        <h4>Profil personnalis√©</h4>
                                        <p>Nous allons maintenant personnaliser votre exp√©rience FORNAP en apprenant √† mieux vous conna√Ætre.</p>
                                    </div>
                                </div>
                                
                                <div class="step-card">
                                    <div class="step-icon">üéâ</div>
                                    <div class="step-content">
                                        <h4>Acc√®s imm√©diat</h4>
                                        <p>Une fois votre profil compl√©t√©, vous aurez acc√®s √† votre dashboard membre et √† tous vos avantages.</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- R√©capitulatif paiement -->
                        <div class="payment-summary" id="paymentSummary">
                            <!-- Contenu g√©n√©r√© dynamiquement -->
                        </div>

                        <!-- Actions -->
                        <div class="congratulations-actions">
                            <button class="btn btn-primary btn-large" onclick="proceedToProfile()">
                                Personnaliser mon profil
                            </button>
                            <button class="btn btn-secondary btn-large" onclick="goToHomepage()">
                                Retour √† l'accueil
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section Avantages rappel -->
        <section class="benefits-reminder">
            <div class="container">
                <h2 class="text-center mb-8">Vos avantages membres vous attendent</h2>
                
                <div class="benefits-grid grid-4">
                    <div class="benefit-highlight">
                        <div class="benefit-icon">üè¢</div>
                        <h4>Acc√®s Coworking</h4>
                        <p>Profitez de nos espaces de travail modernes d√®s aujourd'hui</p>
                    </div>
                    
                    <div class="benefit-highlight">
                        <div class="benefit-icon">üé´</div>
                        <h4>√âv√©nements Exclusifs</h4>
                        <p>Participez √† nos √©v√©nements networking et formations</p>
                    </div>
                    
                    <div class="benefit-highlight">
                        <div class="benefit-icon">‚≠ê</div>
                        <h4>Programme Fid√©lit√©</h4>
                        <p>Commencez √† gagner des points d√®s votre premi√®re visite</p>
                    </div>
                    
                    <div class="benefit-highlight">
                        <div class="benefit-icon">üõçÔ∏è</div>
                        <h4>Boutique Premium</h4>
                        <p>D√©couvrez nos produits avec vos remises membres</p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- ========================================
         FOOTER
         ======================================== -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>FORNAP</h4>
                    <p>Bienvenue dans la communaut√© FORNAP !</p>
                </div>
                
                <div class="footer-section">
                    <h4>Support</h4>
                    <p>Email: support@fornap.fr</p>
                    <p>T√©l√©phone: 01 23 45 67 89</p>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2024 FORNAP. Merci de votre confiance.</p>
            </div>
        </div>
    </footer>

    <!-- ========================================
         CONTAINER MESSAGES
         ======================================== -->
    <div id="messageContainer"></div>

    <!-- ========================================
         SCRIPTS FIREBASE
         ======================================== -->
    <script src="https://www.gstatic.com/firebasejs/12.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/12.0.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/12.0.0/firebase-firestore-compat.js"></script>
    
    <!-- ========================================
         MODULES FORNAP
         ======================================== -->
    <script src="../assets/js/config.js"></script>
    <script src="../assets/js/utils.js"></script>
    <script src="../assets/js/auth-service.js"></script>
    <script src="../assets/js/components.js"></script>

    <!-- ========================================
         JAVASCRIPT PRINCIPAL
         ======================================== -->
    
    <script>
        console.log('üöÄ FORNAP - Congratulations');

        // Variables globales
        let currentUser = null;

        // Fonctions utilitaires
        function showMessage(message, type = 'info') {
            const container = document.getElementById('messageContainer');
            if (!container) {
                // Cr√©er le container s'il n'existe pas
                const messageContainer = document.createElement('div');
                messageContainer.id = 'messageContainer';
                document.body.appendChild(messageContainer);
            }
            
            const messageElement = document.createElement('div');
            messageElement.className = `message ${type}`;
            messageElement.textContent = message;
            document.getElementById('messageContainer').appendChild(messageElement);

            setTimeout(() => messageElement.classList.add('show'), 100);
            setTimeout(() => {
                messageElement.classList.remove('show');
                setTimeout(() => messageElement.remove(), 300);
            }, 4000);
        }

        async function handleLogout() {
            try {
                await FornapAuth.signOut();
                showMessage('D√©connexion r√©ussie', 'success');
                setTimeout(() => {
                    window.location.href = '../index.html';
                }, 1000);
            } catch (error) {
                console.error('‚ùå Erreur d√©connexion:', error);
                showMessage('Erreur lors de la d√©connexion', 'error');
            }
        }

        function showLoginModal() {
            showMessage('Connectez-vous d\'abord sur la page d\'accueil', 'info');
            setTimeout(() => {
                window.location.href = '../index.html';
            }, 2000);
        }

        // Initialisation
        document.addEventListener('DOMContentLoaded', async function() {
            console.log('‚úÖ DOM charg√© - Congratulations');

            try {
                // Initialiser les services
                await FornapAuth.init();
                
                // Initialiser les composants
                initFornapComponents();

                // √âcouter les changements d'authentification
                FornapAuth.onAuthStateChanged((user) => {
                    currentUser = user;
                    console.log('üë§ Utilisateur:', user ? user.email : 'd√©connect√©');
                    
                    // Mettre √† jour l'interface via le syst√®me global synchronis√©
                    FornapComponents.syncAuthState(!!user);
                });

                // Initialisation sp√©cifique √† la page
                if (typeof initPageSpecific === 'function') {
                    initPageSpecific();
                }

                console.log('üéØ FORNAP Congratulations pr√™te !');

            } catch (error) {
                console.error('‚ùå Erreur initialisation:', error);
                showMessage('Erreur lors du chargement. Veuillez recharger la page.', 'error');
            }
        });

        // Initialisation des composants FORNAP
        function initFornapComponents() {
            // Injecter la navbar
            const navbarPlaceholder = document.getElementById('navbar-placeholder');
            if (navbarPlaceholder) {
                navbarPlaceholder.outerHTML = FornapComponents.generateNavbar('congratulations', '../');
            }

            // Injecter le footer
            const footerPlaceholder = document.getElementById('footer-placeholder');
            if (footerPlaceholder) {
                footerPlaceholder.outerHTML = FornapComponents.generateFooter('../');
            }

            // Initialiser les √©v√©nements apr√®s injection
            setTimeout(() => {
                FornapComponents.initNavbarEvents('../', {
                    onLogin: showLoginModal,
                    onLogout: handleLogout
                });
            }, 100);
        }
    </script>

</body>
</html> 