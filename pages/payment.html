<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rejoindre FORNAP - Votre aventure commence ici</title>
    
    <!-- CSS -->
    <link rel="stylesheet" href="../assets/css/main.css">
    <link rel="stylesheet" href="../assets/css/components.css">
    
    <!-- GSAP pour animations professionnelles -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
</head>
<body>
    <!-- Placeholder pour la navbar - sera remplac√©e par le composant -->
    <div id="navbar-placeholder"></div>

    <!-- ========================================
         BARRE DE PROGRESSION FIXE
         ======================================== -->
    <div class="progress-container-fixed">
        <div class="container">
            <div class="journey-progress">
                <div class="progress-track">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <div class="progress-indicators">
                    <div class="progress-indicator completed" id="step1" data-step="1">
                        <div class="indicator-circle">1</div>
                        <span class="indicator-label">Bienvenue</span>
                    </div>
                    <div class="progress-indicator" id="step2" data-step="2">
                        <div class="indicator-circle">2</div>
                        <span class="indicator-label">Inscription</span>
                    </div>
                    <div class="progress-indicator" id="step3" data-step="3">
                        <div class="indicator-circle">3</div>
                        <span class="indicator-label">Forfait</span>
                    </div>
                    <div class="progress-indicator" id="step4" data-step="4">
                        <div class="indicator-circle">4</div>
                        <span class="indicator-label">Paiement</span>
                    </div>
                    <div class="progress-indicator" id="step5" data-step="5">
                        <div class="indicator-circle">5</div>
                        <span class="indicator-label">Bienvenue</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ========================================
         CONTENU PRINCIPAL
         ======================================== -->
    <main class="main-content">
        
        <!-- Section Accueil / Bienvenue -->
        <section id="welcomeSection" class="journey-section active">
            <div class="container">
                <div class="welcome-hero">
                    <div class="welcome-content">
                        <h1 class="hero-title">
                            Vous √™tes pr√™t √† rejoindre<br>
                            <span class="hero-highlight">la communaut√© FORNAP</span> ?
                        </h1>
                        
                        <p class="hero-subtitle">
                            Participez √† un tiers lieu culturel unique o√π cr√©ativit√©, 
                            innovation et collaboration se rencontrent.
                        </p>

                        <div class="hero-features">
                            <div class="feature-chip">
                                <span class="chip-icon">üè¢</span>
                                <span>Espace culturel vivant</span>
                            </div>
                            <div class="feature-chip">
                                <span class="chip-icon">ü§ù</span>
                                <span>Communaut√© bienveillante</span>
                            </div>
                            <div class="feature-chip">
                                <span class="chip-icon">üöÄ</span>
                                <span>Projets collaboratifs</span>
                            </div>
                        </div>

                        <div class="hero-actions">
                            <button class="btn btn-primary btn-large btn-cta" onclick="startJourney()">
                                Cr√©er mon compte membre
                            </button>
                            
                            <button class="btn btn-secondary btn-large" onclick="showLoginForm()">
                                J'ai d√©j√† un compte
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section Connexion -->
        <section id="loginSection" class="journey-section hidden">
            <div class="container">
                <div class="form-container">
                    <div class="form-header">
                        <h2>Bon retour parmi nous !</h2>
                        <p>Connectez-vous √† votre compte membre FORNAP</p>
                    </div>

                    <div class="form-content">
                        <div class="form-field">
                            <label for="loginEmail">Adresse email</label>
                            <input type="email" id="loginEmail" class="form-input" placeholder="votre@email.com" required>
                        </div>
                        
                        <div class="form-field">
                            <label for="loginPassword">Mot de passe</label>
                            <input type="password" id="loginPassword" class="form-input" placeholder="Votre mot de passe" required>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button class="btn btn-secondary" onclick="backToWelcome()">
                            Retour
                        </button>
                        <button class="btn btn-primary" onclick="handleLogin()">
                            Se connecter
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section Inscription -->
        <section id="signupSection" class="journey-section hidden">
            <div class="container">
                <div class="form-container">
                    
                    <!-- √âtape 1: Pr√©nom -->
                    <div class="signup-step active" id="signupStep1" data-step="1">
                        <div class="form-header">
                            <h2>Comment vous appelez-vous ?</h2>
                            <p>Commen√ßons par faire connaissance</p>
                        </div>

                        <div class="form-content">
                            <div class="form-field">
                                <label for="signupFirstName">Votre pr√©nom</label>
                                <input type="text" id="signupFirstName" class="form-input form-input-large" 
                                       placeholder="Jean" required autocomplete="given-name">
                            </div>
                        </div>

                        <div class="form-actions">
                            <button class="btn btn-secondary" onclick="backToWelcome()">
                                Retour
                            </button>
                            <button class="btn btn-primary" onclick="nextSignupStep(2)" disabled id="nextBtn1">
                                Continuer
                            </button>
                        </div>
                    </div>

                    <!-- √âtape 2: Nom -->
                    <div class="signup-step" id="signupStep2" data-step="2">
                        <div class="form-header">
                            <h2>Et votre nom de famille ?</h2>
                            <p>Pour compl√©ter votre identit√© membre</p>
                        </div>

                        <div class="form-content">
                            <div class="form-field">
                                <label for="signupLastName">Votre nom</label>
                                <input type="text" id="signupLastName" class="form-input form-input-large" 
                                       placeholder="Dupont" required autocomplete="family-name">
                            </div>
                        </div>

                        <div class="form-actions">
                            <button class="btn btn-secondary" onclick="previousSignupStep(1)">
                                Retour
                            </button>
                            <button class="btn btn-primary" onclick="nextSignupStep(3)" disabled id="nextBtn2">
                                Continuer
                            </button>
                        </div>
                    </div>

                    <!-- √âtape 3: Email -->
                    <div class="signup-step" id="signupStep3" data-step="3">
                        <div class="form-header">
                            <h2>Votre adresse email ?</h2>
                            <p>Pour vous tenir inform√© des nouveaut√©s FORNAP</p>
                        </div>

                        <div class="form-content">
                            <div class="form-field">
                                <label for="signupEmail">Adresse email</label>
                                <input type="email" id="signupEmail" class="form-input form-input-large" 
                                       placeholder="votre@email.com" required autocomplete="email">
                            </div>
                        </div>

                        <div class="form-actions">
                            <button class="btn btn-secondary" onclick="previousSignupStep(2)">
                                Retour
                            </button>
                            <button class="btn btn-primary" onclick="nextSignupStep(4)" disabled id="nextBtn3">
                                Continuer
                            </button>
                        </div>
                    </div>

                    <!-- √âtape 4: Mot de passe -->
                    <div class="signup-step" id="signupStep4" data-step="4">
                        <div class="form-header">
                            <h2>Cr√©ez votre mot de passe</h2>
                            <p>Minimum 6 caract√®res pour s√©curiser votre compte</p>
                        </div>

                        <div class="form-content">
                            <div class="form-field">
                                <label for="signupPassword">Mot de passe</label>
                                <input type="password" id="signupPassword" class="form-input form-input-large" 
                                       placeholder="Minimum 6 caract√®res" required minlength="6">
                            </div>
                            
                            <div class="form-field">
                                <label for="signupConfirmPassword">Confirmer le mot de passe</label>
                                <input type="password" id="signupConfirmPassword" class="form-input form-input-large" 
                                       placeholder="Retapez votre mot de passe" required>
                            </div>
                        </div>

                        <div class="form-actions">
                            <button class="btn btn-secondary" onclick="previousSignupStep(3)">
                                Retour
                            </button>
                            <button class="btn btn-primary" onclick="createAccount()" disabled id="nextBtn4">
                                Cr√©er mon compte
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section Choix forfait -->
        <section id="planSection" class="journey-section hidden">
            <div class="container">
                <div class="form-container">
                    <div class="form-header">
                        <h2>Choisissez votre forfait membre</h2>
                        <p>S√©lectionnez l'adh√©sion qui correspond √† vos besoins</p>
                    </div>

                    <div class="plans-showcase">
                        <div class="plan-option" data-plan="basic" onclick="selectPlan('basic')">
                            <div class="plan-header">
                                <h3>Membre D√©couverte</h3>
                                <div class="plan-pricing">
                                    <span class="price">29</span>
                                    <span class="currency">‚Ç¨/mois</span>
                                </div>
                            </div>
                            <div class="plan-benefits">
                                <div class="benefit">‚úì Acc√®s aux espaces communs</div>
                                <div class="benefit">‚úì √âv√©nements communautaires</div>
                                <div class="benefit">‚úì Wi-Fi haut d√©bit</div>
                                <div class="benefit">‚úì Caf√©/th√© inclus</div>
                            </div>
                        </div>

                        <div class="plan-option featured" data-plan="pro" onclick="selectPlan('pro')">
                            <div class="plan-badge">Recommand√©</div>
                            <div class="plan-header">
                                <h3>Membre Actif</h3>
                                <div class="plan-pricing">
                                    <span class="price">59</span>
                                    <span class="currency">‚Ç¨/mois</span>
                                </div>
                            </div>
                            <div class="plan-benefits">
                                <div class="benefit">‚úì Tout du forfait D√©couverte</div>
                                <div class="benefit">‚úì Espace de travail d√©di√©</div>
                                <div class="benefit">‚úì Acc√®s 24h/24</div>
                                <div class="benefit">‚úì Salles de r√©union (2h/mois)</div>
                                <div class="benefit">‚úì Impression/scan inclus</div>
                            </div>
                        </div>

                        <div class="plan-option" data-plan="premium" onclick="selectPlan('premium')">
                            <div class="plan-header">
                                <h3>Membre Premium</h3>
                                <div class="plan-pricing">
                                    <span class="price">99</span>
                                    <span class="currency">‚Ç¨/mois</span>
                                </div>
                            </div>
                            <div class="plan-benefits">
                                <div class="benefit">‚úì Tout du forfait Actif</div>
                                <div class="benefit">‚úì Bureau priv√© disponible</div>
                                <div class="benefit">‚úì Salles de r√©union illimit√©es</div>
                                <div class="benefit">‚úì Support prioritaire</div>
                                <div class="benefit">‚úì √âv√©nements VIP</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section Paiement -->
        <section id="paymentSection" class="journey-section hidden">
            <div class="container">
                <div class="payment-layout">
                    
                    <!-- R√©sum√© commande -->
                    <div class="order-summary-sidebar">
                        <div class="summary-card">
                            <h3>Votre forfait</h3>
                            <div id="selectedPlanDisplay">
                                <!-- Forfait s√©lectionn√© affich√© ici -->
                            </div>
                            <button class="btn btn-outline btn-small" onclick="backToPlanSelection()">
                                Modifier le forfait
                            </button>
                        </div>
                    </div>

                    <!-- Formulaire paiement -->
                    <div class="payment-form-area">
                        <div class="form-header">
                            <h2>Finalisons votre adh√©sion</h2>
                            <p>Derni√®re √©tape avant de rejoindre la communaut√©</p>
                            <div class="demo-badge">
                                Mode D√©mo - Simulation de paiement
                            </div>
                        </div>

                        <div class="payment-methods">
                            <h4>M√©thode de paiement</h4>
                            <div class="method-selector">
                                <label class="payment-method active" data-method="card">
                                    <input type="radio" name="paymentMethod" value="card" checked>
                                    <div class="method-content">
                                        <span class="method-icon">üí≥</span>
                                        <span class="method-name">Carte bancaire</span>
                                    </div>
                                </label>
                                <label class="payment-method" data-method="paypal">
                                    <input type="radio" name="paymentMethod" value="paypal">
                                    <div class="method-content">
                                        <span class="method-icon">üÖøÔ∏è</span>
                                        <span class="method-name">PayPal</span>
                                    </div>
                                </label>
                            </div>
                        </div>

                        <div class="card-form" id="cardForm">
                            <div class="form-field">
                                <label for="cardNumber">Num√©ro de carte</label>
                                <input type="text" id="cardNumber" class="form-input" placeholder="1234 5678 9012 3456" maxlength="19">
                            </div>
                            
                            <div class="form-row">
                                <div class="form-field">
                                    <label for="expiryDate">Expiration</label>
                                    <input type="text" id="expiryDate" class="form-input" placeholder="MM/AA" maxlength="5">
                                </div>
                                <div class="form-field">
                                    <label for="cvv">CVV</label>
                                    <input type="text" id="cvv" class="form-input" placeholder="123" maxlength="4">
                                </div>
                            </div>
                            
                            <div class="form-field">
                                <label for="cardName">Nom sur la carte</label>
                                <input type="text" id="cardName" class="form-input" placeholder="Jean Dupont">
                            </div>
                        </div>

                        <div class="terms-agreement">
                            <label class="checkbox-field">
                                <input type="checkbox" id="acceptTerms" required>
                                <span class="checkbox-mark"></span>
                                <span class="checkbox-label">
                                    J'accepte les <a href="#" target="_blank">conditions g√©n√©rales</a> 
                                    et la <a href="#" target="_blank">politique de confidentialit√©</a>
                                </span>
                            </label>
                        </div>

                        <div class="form-actions">
                            <button class="btn btn-primary btn-large btn-full" onclick="processPayment()">
                                Finaliser l'adh√©sion
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section F√©licitations -->
        <section id="congratulationsSection" class="journey-section hidden">
            <div class="container">
                <div class="success-container">
                    <div class="success-visual">
                        <div class="success-icon" id="successIcon">‚úì</div>
                    </div>

                    <div class="success-content">
                        <h1>F√©licitations !</h1>
                        <p class="success-subtitle">
                            Vous faites maintenant partie du projet FORNAP
                        </p>

                        <div class="project-intro">
                            <h3>Faisons un tour d'horizon du projet</h3>
                            
                            <div class="intro-features">
                                <div class="intro-feature">
                                    <div class="feature-visual">üè¢</div>
                                    <div class="feature-details">
                                        <h4>Votre nouveau tiers lieu</h4>
                                        <p>Un espace de 500m¬≤ d√©di√© √† la cr√©ativit√©, au coworking et aux √©v√©nements culturels</p>
                                    </div>
                                </div>
                                
                                <div class="intro-feature">
                                    <div class="feature-visual">ü§ù</div>
                                    <div class="feature-details">
                                        <h4>Une communaut√© dynamique</h4>
                                        <p>Plus de 200 membres actifs : entrepreneurs, artistes, d√©veloppeurs, cr√©atifs...</p>
                                    </div>
                                </div>
                                
                                <div class="intro-feature">
                                    <div class="feature-visual">üé®</div>
                                    <div class="feature-details">
                                        <h4>Projets collaboratifs</h4>
                                        <p>Participez √† des hackathons, expositions, concerts et workshops cr√©atifs</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <button class="btn btn-primary btn-large" onclick="startGettingToKnow()">
                            Faisons connaissance
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section Questions de connaissance -->
        <section id="gettingToKnowSection" class="journey-section hidden">
            <div class="container">
                <div class="form-container">
                    
                    <!-- Question 1: Ville -->
                    <div class="know-step active" id="knowStep1" data-step="1">
                        <div class="form-header">
                            <h2>Dans quelle ville √™tes-vous bas√© ?</h2>
                            <p>Pour mieux comprendre notre communaut√©</p>
                        </div>

                        <div class="form-content">
                            <div class="form-field">
                                <label for="userCity">Votre ville</label>
                                <input type="text" id="userCity" class="form-input form-input-large" 
                                       placeholder="Paris, Lyon, Marseille..." autocomplete="address-level2">
                            </div>
                        </div>

                        <div class="form-actions">
                            <button class="btn btn-primary" onclick="nextKnowStep(2)" disabled id="knowNextBtn1">
                                Continuer
                            </button>
                        </div>
                    </div>

                    <!-- Question 2: Motivation -->
                    <div class="know-step" id="knowStep2" data-step="2">
                        <div class="form-header">
                            <h2>Qu'est-ce qui vous a motiv√© √† rejoindre FORNAP ?</h2>
                            <p>Votre motivation nous aide √† am√©liorer notre projet</p>
                        </div>

                        <div class="form-content">
                            <div class="choice-grid">
                                <label class="choice-option" data-value="coworking">
                                    <input type="radio" name="motivation" value="coworking">
                                    <div class="choice-content">
                                        <span class="choice-icon">üíº</span>
                                        <span class="choice-text">Espace de coworking inspirant</span>
                                    </div>
                                </label>
                                
                                <label class="choice-option" data-value="community">
                                    <input type="radio" name="motivation" value="community">
                                    <div class="choice-content">
                                        <span class="choice-icon">ü§ù</span>
                                        <span class="choice-text">Rencontrer d'autres cr√©atifs</span>
                                    </div>
                                </label>
                                
                                <label class="choice-option" data-value="events">
                                    <input type="radio" name="motivation" value="events">
                                    <div class="choice-content">
                                        <span class="choice-icon">üé≠</span>
                                        <span class="choice-text">√âv√©nements culturels uniques</span>
                                    </div>
                                </label>
                                
                                <label class="choice-option" data-value="projects">
                                    <input type="radio" name="motivation" value="projects">
                                    <div class="choice-content">
                                        <span class="choice-icon">üöÄ</span>
                                        <span class="choice-text">Projets collaboratifs</span>
                                    </div>
                                </label>
                            </div>
                        </div>

                        <div class="form-actions">
                            <button class="btn btn-secondary" onclick="previousKnowStep(1)">
                                Retour
                            </button>
                            <button class="btn btn-primary" onclick="nextKnowStep(3)" disabled id="knowNextBtn2">
                                Continuer
                            </button>
                        </div>
                    </div>

                    <!-- Question 3: D√©couverte -->
                    <div class="know-step" id="knowStep3" data-step="3">
                        <div class="form-header">
                            <h2>Comment avez-vous entendu parler de nous ?</h2>
                            <p>Cela nous aide √† mieux communiquer avec de futurs membres</p>
                        </div>

                        <div class="form-content">
                            <div class="choice-grid">
                                <label class="choice-option" data-value="social">
                                    <input type="radio" name="discovery" value="social">
                                    <div class="choice-content">
                                        <span class="choice-icon">üì±</span>
                                        <span class="choice-text">R√©seaux sociaux</span>
                                    </div>
                                </label>
                                
                                <label class="choice-option" data-value="friend">
                                    <input type="radio" name="discovery" value="friend">
                                    <div class="choice-content">
                                        <span class="choice-icon">üë•</span>
                                        <span class="choice-text">Recommandation d'un ami</span>
                                    </div>
                                </label>
                                
                                <label class="choice-option" data-value="search">
                                    <input type="radio" name="discovery" value="search">
                                    <div class="choice-content">
                                        <span class="choice-icon">üîç</span>
                                        <span class="choice-text">Recherche Google</span>
                                    </div>
                                </label>
                                
                                <label class="choice-option" data-value="event">
                                    <input type="radio" name="discovery" value="event">
                                    <div class="choice-content">
                                        <span class="choice-icon">üé™</span>
                                        <span class="choice-text">√âv√©nement local</span>
                                    </div>
                                </label>
                                
                                <label class="choice-option" data-value="other">
                                    <input type="radio" name="discovery" value="other">
                                    <div class="choice-content">
                                        <span class="choice-icon">üí°</span>
                                        <span class="choice-text">Autre</span>
                                    </div>
                                </label>
                            </div>
                        </div>

                        <div class="form-actions">
                            <button class="btn btn-secondary" onclick="previousKnowStep(2)">
                                Retour
                            </button>
                            <button class="btn btn-primary" onclick="finalizeOnboarding()" disabled id="knowNextBtn3">
                                C'est parti !
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section Finale -->
        <section id="finalSection" class="journey-section hidden">
            <div class="container">
                <div class="final-container">
                    <div class="final-visual">
                        <div class="final-icon" id="finalIcon">üéâ</div>
                    </div>

                    <div class="final-content">
                        <h1>Bienvenue dans le projet FORNAP !</h1>
                        <p class="final-subtitle">
                            Votre aventure cr√©ative et collaborative commence maintenant.
                            Votre dashboard membre vous attend avec toutes vos ressources.
                        </p>

                        <div class="next-steps">
                            <div class="step-item">
                                <span class="step-icon">üìß</span>
                                <div class="step-info">
                                    <strong>Email de confirmation envoy√©</strong>
                                    <p>V√©rifiez votre bo√Æte mail pour votre carte membre virtuelle</p>
                                </div>
                            </div>
                            
                            <div class="step-item">
                                <span class="step-icon">üì±</span>
                                <div class="step-info">
                                    <strong>Application mobile</strong>
                                    <p>T√©l√©chargez l'app FORNAP pour un acc√®s facile (bient√¥t disponible)</p>
                                </div>
                            </div>
                        </div>

                        <button class="btn btn-primary btn-large btn-cta" onclick="goToDashboard()">
                            Commencer mon exp√©rience FORNAP
                        </button>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Placeholder pour le footer - sera remplac√© par le composant -->
    <div id="footer-placeholder"></div>

    <!-- ========================================
         MODAL DE CHARGEMENT
         ======================================== -->
    <div id="loadingModal" class="modal hidden">
        <div class="modal-backdrop"></div>
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="loading-spinner"></div>
                <h3 id="loadingTitle">Traitement en cours...</h3>
                <p id="loadingMessage">Veuillez patienter</p>
                <div class="loading-progress">
                    <div class="progress-step" id="loadingStep1">‚úì Cr√©ation du compte</div>
                    <div class="progress-step" id="loadingStep2">üîÑ Traitement du paiement</div>
                    <div class="progress-step" id="loadingStep3">üìÑ Configuration du profil</div>
                    <div class="progress-step" id="loadingStep4">üéâ Finalisation</div>
                </div>
            </div>
        </div>
    </div>

    <!-- ========================================
         CONTAINER MESSAGES
         ======================================== -->
    <div id="messageContainer"></div>

    <!-- ========================================
         SCRIPTS FIREBASE
         ======================================== -->
    <script src="https://www.gstatic.com/firebasejs/12.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/12.0.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/12.0.0/firebase-firestore-compat.js"></script>

    <!-- ========================================
         MODULES FORNAP
         ======================================== -->
    <script src="../assets/js/config.js"></script>
    <script src="../assets/js/utils.js"></script>
    <script src="../assets/js/auth-service.js"></script>
    <script src="../assets/js/components.js"></script>

    <!-- ========================================
         JAVASCRIPT PRINCIPAL
         ======================================== -->
    
    <script>
        console.log('üöÄ FORNAP - Journey Experience Pro');

        // Variables globales
        let currentUser = null;
        let selectedPlan = null;
        let currentSection = 'welcome';
        let currentSignupStep = 1;
        let currentKnowStep = 1;
        let userProfile = {};

        // Plans disponibles
        const plans = {
            basic: {
                name: 'Membre D√©couverte',
                price: 29,
                period: '/mois',
                features: [
                    'Acc√®s aux espaces communs',
                    '√âv√©nements communautaires',
                    'Wi-Fi haut d√©bit',
                    'Caf√©/th√© inclus'
                ]
            },
            pro: {
                name: 'Membre Actif',
                price: 59,
                period: '/mois',
                features: [
                    'Tout du forfait D√©couverte',
                    'Espace de travail d√©di√©',
                    'Acc√®s 24h/24',
                    'Salles de r√©union (2h/mois)',
                    'Impression/scan inclus'
                ]
            },
            premium: {
                name: 'Membre Premium',
                price: 99,
                period: '/mois',
                features: [
                    'Tout du forfait Actif',
                    'Bureau priv√© disponible',
                    'Salles de r√©union illimit√©es',
                    'Support prioritaire',
                    '√âv√©nements VIP'
                ]
            }
        };

        // Initialisation GSAP
        gsap.registerPlugin();

        // Fonctions utilitaires
        function showMessage(message, type = 'info') {
            const container = document.getElementById('messageContainer');
            if (!container) {
                const messageContainer = document.createElement('div');
                messageContainer.id = 'messageContainer';
                document.body.appendChild(messageContainer);
            }
            
            const messageElement = document.createElement('div');
            messageElement.className = `message ${type}`;
            messageElement.textContent = message;
            document.getElementById('messageContainer').appendChild(messageElement);

            gsap.fromTo(messageElement, 
                { x: 400, opacity: 0 },
                { x: 0, opacity: 1, duration: 0.4, ease: "back.out(1.7)" }
            );
            
            setTimeout(() => {
                gsap.to(messageElement, {
                    x: 400,
                    opacity: 0,
                    duration: 0.3,
                    ease: "back.in(1.7)",
                    onComplete: () => messageElement.remove()
                });
            }, 4000);
        }

        async function handleLogout() {
            try {
                await FornapAuth.signOut();
                showMessage('D√©connexion r√©ussie', 'success');
                setTimeout(() => {
                    window.location.href = '../index.html';
                }, 1000);
            } catch (error) {
                console.error('‚ùå Erreur d√©connexion:', error);
                showMessage('Erreur lors de la d√©connexion', 'error');
            }
        }

        function showLoginModal() {
            showMessage('Connectez-vous d\'abord sur la page d\'accueil', 'info');
            setTimeout(() => {
                window.location.href = '../index.html';
            }, 2000);
        }

        // Navigation entre sections avec GSAP
        function showSection(sectionId) {
            const currentActiveSection = document.querySelector('.journey-section.active');
            const targetSection = document.getElementById(sectionId);
            
            if (!targetSection) return;

            // Animation de sortie
            if (currentActiveSection) {
                gsap.to(currentActiveSection, {
                    opacity: 0,
                    y: -30,
                    duration: 0.3,
                    ease: "power2.in",
                    onComplete: () => {
                        currentActiveSection.classList.remove('active');
                        currentActiveSection.classList.add('hidden');
                        
                        // Animation d'entr√©e
                        targetSection.classList.remove('hidden');
                        targetSection.classList.add('active');
                        
                        gsap.fromTo(targetSection, 
                            { opacity: 0, y: 30 },
                            { 
                                opacity: 1, 
                                y: 0, 
                                duration: 0.5, 
                                ease: "power2.out",
                                onComplete: () => {
                                    // Focus sur le premier input si pr√©sent
                                    const firstInput = targetSection.querySelector('input');
                                    if (firstInput) firstInput.focus();
                                }
                            }
                        );
                    }
                });
            } else {
                targetSection.classList.remove('hidden');
                targetSection.classList.add('active');
                gsap.fromTo(targetSection, 
                    { opacity: 0, y: 30 },
                    { opacity: 1, y: 0, duration: 0.5, ease: "power2.out" }
                );
            }

            currentSection = sectionId.replace('Section', '');
            updateProgress();
        }

        function updateProgress() {
            const stepMapping = {
                'welcome': 1,
                'signup': 2,
                'login': 2,
                'plan': 3,
                'payment': 4,
                'congratulations': 5,
                'gettingToKnow': 5,
                'final': 5
            };
            
            const currentStepNumber = stepMapping[currentSection] || 1;
            const progressWidth = ((currentStepNumber - 1) / 4) * 100;
            
            gsap.to('#progressFill', {
                width: `${progressWidth}%`,
                duration: 0.6,
                ease: "power2.out"
            });
            
            // Mettre √† jour les indicateurs
            for (let i = 1; i <= 5; i++) {
                const indicator = document.getElementById(`step${i}`);
                const circle = indicator.querySelector('.indicator-circle');
                
                indicator.classList.remove('active', 'completed');
                
                if (i < currentStepNumber) {
                    indicator.classList.add('completed');
                    gsap.to(circle, { scale: 1.1, duration: 0.3, ease: "back.out(1.7)" });
                } else if (i === currentStepNumber) {
                    indicator.classList.add('active');
                    gsap.to(circle, { scale: 1.2, duration: 0.3, ease: "back.out(1.7)" });
                } else {
                    gsap.to(circle, { scale: 1, duration: 0.3, ease: "power2.out" });
                }
            }
        }

        // Fonctions de navigation
        function startJourney() {
            showSection('signupSection');
        }

        function showLoginForm() {
            showSection('loginSection');
        }

        function backToWelcome() {
            showSection('welcomeSection');
        }

        // Fonctions d'inscription avec animations GSAP
        function nextSignupStep(stepNumber) {
            // Validation
            if (currentSignupStep === 1) {
                const firstName = document.getElementById('signupFirstName').value.trim();
                if (!firstName) {
                    showMessage('Veuillez saisir votre pr√©nom', 'error');
                    return;
                }
                userProfile.firstName = firstName;
            }
            
            if (currentSignupStep === 2) {
                const lastName = document.getElementById('signupLastName').value.trim();
                if (!lastName) {
                    showMessage('Veuillez saisir votre nom', 'error');
                    return;
                }
                userProfile.lastName = lastName;
            }
            
            if (currentSignupStep === 3) {
                const email = document.getElementById('signupEmail').value.trim();
                if (!email || !email.includes('@')) {
                    showMessage('Veuillez saisir une adresse email valide', 'error');
                    return;
                }
                userProfile.email = email;
            }

            // Animation professionnelle
            const currentStep = document.getElementById(`signupStep${currentSignupStep}`);
            const nextStep = document.getElementById(`signupStep${stepNumber}`);
            
            if (currentStep && nextStep) {
                gsap.to(currentStep, {
                    x: -100,
                    opacity: 0,
                    duration: 0.4,
                    ease: "power2.in",
                    onComplete: () => {
                        currentStep.classList.remove('active');
                        nextStep.classList.add('active');
                        
                        gsap.fromTo(nextStep, 
                            { x: 100, opacity: 0 },
                            { 
                                x: 0, 
                                opacity: 1, 
                                duration: 0.4, 
                                ease: "power2.out",
                                onComplete: () => {
                                    const input = nextStep.querySelector('input');
                                    if (input) input.focus();
                                }
                            }
                        );
                    }
                });
                
                currentSignupStep = stepNumber;
            }
        }

        function previousSignupStep(stepNumber) {
            const currentStep = document.getElementById(`signupStep${currentSignupStep}`);
            const prevStep = document.getElementById(`signupStep${stepNumber}`);
            
            if (currentStep && prevStep) {
                gsap.to(currentStep, {
                    x: 100,
                    opacity: 0,
                    duration: 0.4,
                    ease: "power2.in",
                    onComplete: () => {
                        currentStep.classList.remove('active');
                        prevStep.classList.add('active');
                        
                        gsap.fromTo(prevStep, 
                            { x: -100, opacity: 0 },
                            { 
                                x: 0, 
                                opacity: 1, 
                                duration: 0.4, 
                                ease: "power2.out" 
                            }
                        );
                    }
                });
                
                currentSignupStep = stepNumber;
            }
        }

        async function createAccount() {
            const password = document.getElementById('signupPassword').value;
            const confirmPassword = document.getElementById('signupConfirmPassword').value;

            if (!password || password.length < 6) {
                showMessage('Le mot de passe doit contenir au moins 6 caract√®res', 'error');
                return;
            }

            if (password !== confirmPassword) {
                showMessage('Les mots de passe ne correspondent pas', 'error');
                return;
            }

            try {
                showLoadingModal('Cr√©ation de votre compte...');
                
                const user = await FornapAuth.signUp(userProfile.email, password, {
                    displayName: `${userProfile.firstName} ${userProfile.lastName}`,
                    firstName: userProfile.firstName,
                    lastName: userProfile.lastName
                });

                hideLoadingModal();
                showMessage('Compte cr√©√© avec succ√®s !', 'success');
                
                setTimeout(() => {
                    showSection('planSection');
                }, 1000);

            } catch (error) {
                hideLoadingModal();
                console.error('‚ùå Erreur inscription:', error);
                showMessage(error.message || 'Erreur lors de la cr√©ation du compte', 'error');
            }
        }

        async function handleLogin() {
            const email = document.getElementById('loginEmail').value.trim();
            const password = document.getElementById('loginPassword').value;

            if (!email || !password) {
                showMessage('Veuillez remplir tous les champs', 'error');
                return;
            }

            try {
                showLoadingModal('Connexion en cours...');
                
                const user = await FornapAuth.signIn(email, password);
                
                hideLoadingModal();
                showMessage('Connexion r√©ussie !', 'success');
                
                setTimeout(() => {
                    showSection('planSection');
                }, 1000);

            } catch (error) {
                hideLoadingModal();
                console.error('‚ùå Erreur connexion:', error);
                showMessage('Email ou mot de passe incorrect', 'error');
            }
        }

        // S√©lection de forfait avec animations
        function selectPlan(planId) {
            selectedPlan = { id: planId, ...plans[planId] };
            
            // Animation de s√©lection
            const planCards = document.querySelectorAll('.plan-option');
            const selectedCard = document.querySelector(`[data-plan="${planId}"]`);
            
            planCards.forEach(card => {
                if (card === selectedCard) {
                    gsap.to(card, {
                        scale: 1.05,
                        borderColor: '#28A745',
                        backgroundColor: '#F8F9FA',
                        duration: 0.3,
                        ease: "back.out(1.7)"
                    });
                } else {
                    gsap.to(card, {
                        scale: 1,
                        borderColor: '#E9ECEF',
                        backgroundColor: '#FFFFFF',
                        duration: 0.3,
                        ease: "power2.out"
                    });
                }
            });
            
            setTimeout(() => {
                showSection('paymentSection');
                displaySelectedPlan();
            }, 600);
        }

        function displaySelectedPlan() {
            const display = document.getElementById('selectedPlanDisplay');
            if (display && selectedPlan) {
                const price = selectedPlan.price;
                const total = (price * 1.2).toFixed(2);
                
                display.innerHTML = `
                    <div class="plan-details">
                        <h4>${selectedPlan.name}</h4>
                        <div class="plan-cost">${selectedPlan.price}‚Ç¨${selectedPlan.period}</div>
                        <div class="plan-calculation">
                            <div class="calc-line">
                                <span>Sous-total</span>
                                <span>${price}‚Ç¨</span>
                            </div>
                            <div class="calc-line">
                                <span>TVA (20%)</span>
                                <span>${(price * 0.2).toFixed(2)}‚Ç¨</span>
                            </div>
                            <div class="calc-total">
                                <span><strong>Total</strong></span>
                                <span><strong>${total}‚Ç¨</strong></span>
                            </div>
                        </div>
                    </div>
                `;
                
                gsap.fromTo(display, 
                    { opacity: 0, y: 20 },
                    { opacity: 1, y: 0, duration: 0.5, ease: "power2.out" }
                );
            }
        }

        function backToPlanSelection() {
            showSection('planSection');
        }

        async function processPayment() {
            const acceptTerms = document.getElementById('acceptTerms').checked;
            
            if (!acceptTerms) {
                showMessage('Veuillez accepter les conditions g√©n√©rales', 'error');
                return;
            }

            try {
                showLoadingModal('Traitement du paiement...');
                
                await simulatePayment();
                
                hideLoadingModal();
                
                setTimeout(() => {
                    showSection('congratulationsSection');
                    triggerSuccessAnimation();
                }, 500);

            } catch (error) {
                hideLoadingModal();
                console.error('‚ùå Erreur paiement:', error);
                showMessage('Erreur lors du traitement du paiement', 'error');
            }
        }

        async function simulatePayment() {
            const steps = [
                { id: 'loadingStep1', delay: 1000 },
                { id: 'loadingStep2', delay: 2000 },
                { id: 'loadingStep3', delay: 1500 },
                { id: 'loadingStep4', delay: 1000 }
            ];

            for (let i = 0; i < steps.length; i++) {
                await new Promise(resolve => {
                    setTimeout(() => {
                        const step = document.getElementById(steps[i].id);
                        if (step) {
                            step.style.color = '#28A745';
                            step.innerHTML = step.innerHTML.replace('üîÑ', '‚úì');
                        }
                        resolve();
                    }, steps[i].delay);
                });
            }
        }

        function triggerSuccessAnimation() {
            const successIcon = document.getElementById('successIcon');
            
            gsap.set(successIcon, { scale: 0, rotation: -180 });
            gsap.to(successIcon, {
                scale: 1,
                rotation: 0,
                duration: 0.8,
                ease: "back.out(1.7)"
            });
        }

        function startGettingToKnow() {
            showSection('gettingToKnowSection');
        }

        // Fonctions questions avec animations GSAP
        function nextKnowStep(stepNumber) {
            if (currentKnowStep === 1) {
                const city = document.getElementById('userCity').value.trim();
                if (!city) {
                    showMessage('Veuillez indiquer votre ville', 'error');
                    return;
                }
                userProfile.city = city;
            }
            
            if (currentKnowStep === 2) {
                const motivation = document.querySelector('input[name="motivation"]:checked');
                if (!motivation) {
                    showMessage('Veuillez s√©lectionner votre motivation', 'error');
                    return;
                }
                userProfile.motivation = motivation.value;
            }

            const currentStep = document.getElementById(`knowStep${currentKnowStep}`);
            const nextStep = document.getElementById(`knowStep${stepNumber}`);
            
            if (currentStep && nextStep) {
                gsap.to(currentStep, {
                    x: -100,
                    opacity: 0,
                    duration: 0.4,
                    ease: "power2.in",
                    onComplete: () => {
                        currentStep.classList.remove('active');
                        nextStep.classList.add('active');
                        
                        gsap.fromTo(nextStep, 
                            { x: 100, opacity: 0 },
                            { x: 0, opacity: 1, duration: 0.4, ease: "power2.out" }
                        );
                    }
                });
                
                currentKnowStep = stepNumber;
            }
        }

        function previousKnowStep(stepNumber) {
            const currentStep = document.getElementById(`knowStep${currentKnowStep}`);
            const prevStep = document.getElementById(`knowStep${stepNumber}`);
            
            if (currentStep && prevStep) {
                gsap.to(currentStep, {
                    x: 100,
                    opacity: 0,
                    duration: 0.4,
                    ease: "power2.in",
                    onComplete: () => {
                        currentStep.classList.remove('active');
                        prevStep.classList.add('active');
                        
                        gsap.fromTo(prevStep, 
                            { x: -100, opacity: 0 },
                            { x: 0, opacity: 1, duration: 0.4, ease: "power2.out" }
                        );
                    }
                });
                
                currentKnowStep = stepNumber;
            }
        }

        async function finalizeOnboarding() {
            const discovery = document.querySelector('input[name="discovery"]:checked');
            if (!discovery) {
                showMessage('Veuillez nous dire comment vous nous avez d√©couverts', 'error');
                return;
            }
            
            userProfile.discovery = discovery.value;
            
            try {
                showLoadingModal('Finalisation de votre profil...');
                
                if (currentUser) {
                    console.log('Profil utilisateur:', userProfile);
                }
                
                await new Promise(resolve => setTimeout(resolve, 2000));
                
                hideLoadingModal();
                showSection('finalSection');
                
                // Animation finale
                const finalIcon = document.getElementById('finalIcon');
                gsap.set(finalIcon, { scale: 0 });
                gsap.to(finalIcon, {
                    scale: 1,
                    duration: 1,
                    ease: "bounce.out"
                });
                
            } catch (error) {
                hideLoadingModal();
                console.error('‚ùå Erreur finalisation:', error);
                showMessage('Erreur lors de la finalisation', 'error');
            }
        }

        function goToDashboard() {
            showMessage('Redirection vers votre dashboard...', 'success');
            setTimeout(() => {
                window.location.href = 'dashboard.html';
            }, 1500);
        }

        // Fonctions modales
        function showLoadingModal(message = 'Traitement en cours...') {
            const modal = document.getElementById('loadingModal');
            const title = document.getElementById('loadingTitle');
            const messageEl = document.getElementById('loadingMessage');
            
            if (title) title.textContent = message;
            if (messageEl) messageEl.textContent = 'Veuillez patienter...';
            
            modal.classList.remove('hidden');
            
            gsap.fromTo(modal.querySelector('.modal-content'), 
                { scale: 0.8, opacity: 0 },
                { scale: 1, opacity: 1, duration: 0.4, ease: "back.out(1.7)" }
            );
        }

        function hideLoadingModal() {
            const modal = document.getElementById('loadingModal');
            gsap.to(modal.querySelector('.modal-content'), {
                scale: 0.8,
                opacity: 0,
                duration: 0.3,
                ease: "back.in(1.7)",
                onComplete: () => modal.classList.add('hidden')
            });
        }

        // Validation en temps r√©el
        function setupValidation() {
            // Champs signup
            const signupFields = [
                { id: 'signupFirstName', btnId: 'nextBtn1' },
                { id: 'signupLastName', btnId: 'nextBtn2' },
                { id: 'signupEmail', btnId: 'nextBtn3' },
                { id: 'signupPassword', btnId: 'nextBtn4' }
            ];
            
            signupFields.forEach(field => {
                const input = document.getElementById(field.id);
                const btn = document.getElementById(field.btnId);
                
                if (input && btn) {
                    input.addEventListener('input', () => {
                        const isValid = input.value.trim();
                        btn.disabled = !isValid;
                        
                        if (isValid) {
                            gsap.to(btn, { scale: 1, opacity: 1, duration: 0.3 });
                        } else {
                            gsap.to(btn, { scale: 0.95, opacity: 0.6, duration: 0.3 });
                        }
                    });
                }
            });
            
            // Validation ville
            const cityInput = document.getElementById('userCity');
            const cityBtn = document.getElementById('knowNextBtn1');
            if (cityInput && cityBtn) {
                cityInput.addEventListener('input', () => {
                    cityBtn.disabled = !cityInput.value.trim();
                });
            }
            
            // Validation radio buttons avec animations
            document.querySelectorAll('input[name="motivation"]').forEach(radio => {
                radio.addEventListener('change', () => {
                    const btn = document.getElementById('knowNextBtn2');
                    if (btn) {
                        btn.disabled = false;
                        gsap.to(btn, { scale: 1, opacity: 1, duration: 0.3 });
                    }
                    
                    // Animation de s√©lection
                    const option = radio.closest('.choice-option');
                    document.querySelectorAll('.choice-option').forEach(opt => {
                        gsap.to(opt, { scale: 1, duration: 0.2 });
                    });
                    gsap.to(option, { scale: 1.02, duration: 0.2, ease: "back.out(1.7)" });
                });
            });
            
            document.querySelectorAll('input[name="discovery"]').forEach(radio => {
                radio.addEventListener('change', () => {
                    const btn = document.getElementById('knowNextBtn3');
                    if (btn) {
                        btn.disabled = false;
                        gsap.to(btn, { scale: 1, opacity: 1, duration: 0.3 });
                    }
                    
                    const option = radio.closest('.choice-option');
                    document.querySelectorAll('.choice-option').forEach(opt => {
                        gsap.to(opt, { scale: 1, duration: 0.2 });
                    });
                    gsap.to(option, { scale: 1.02, duration: 0.2, ease: "back.out(1.7)" });
                });
            });
        }

        // Formatage des champs de paiement
        function formatPaymentInputs() {
            const cardNumber = document.getElementById('cardNumber');
            const expiryDate = document.getElementById('expiryDate');
            const cvv = document.getElementById('cvv');

            if (cardNumber) {
                cardNumber.addEventListener('input', function(e) {
                    let value = e.target.value.replace(/\s+/g, '').replace(/[^0-9]/gi, '');
                    let formattedValue = value.match(/.{1,4}/g)?.join(' ') || value;
                    e.target.value = formattedValue;
                });
            }

            if (expiryDate) {
                expiryDate.addEventListener('input', function(e) {
                    let value = e.target.value.replace(/\D/g, '');
                    if (value.length >= 2) {
                        value = value.substring(0, 2) + '/' + value.substring(2, 4);
                    }
                    e.target.value = value;
                });
            }

            if (cvv) {
                cvv.addEventListener('input', function(e) {
                    e.target.value = e.target.value.replace(/\D/g, '');
                });
            }
        }

        // Initialisation
        document.addEventListener('DOMContentLoaded', async function() {
            console.log('‚úÖ DOM charg√© - Journey Experience Pro');

            try {
                // Initialiser les services
                await FornapAuth.init();
                
                // Initialiser les composants
                initFornapComponents();

                // √âcouter les changements d'authentification
                FornapAuth.onAuthStateChanged((user) => {
                    currentUser = user;
                    console.log('üë§ Utilisateur:', user ? user.email : 'd√©connect√©');
                    
                    FornapComponents.syncAuthState(!!user);
                });

                // Configuration
                setupValidation();
                formatPaymentInputs();
                updateProgress();

                // Animation d'entr√©e
                gsap.fromTo('.welcome-hero', 
                    { opacity: 0, y: 50 },
                    { opacity: 1, y: 0, duration: 1, ease: "power2.out" }
                );

                console.log('üéØ FORNAP Journey Experience Pro pr√™te !');

            } catch (error) {
                console.error('‚ùå Erreur initialisation:', error);
                showMessage('Erreur lors du chargement. Veuillez recharger la page.', 'error');
            }
        });

        // Initialisation des composants FORNAP
        function initFornapComponents() {
            const navbarPlaceholder = document.getElementById('navbar-placeholder');
            if (navbarPlaceholder) {
                navbarPlaceholder.outerHTML = FornapComponents.generateNavbar('journey', '../');
            }

            const footerPlaceholder = document.getElementById('footer-placeholder');
            if (footerPlaceholder) {
                footerPlaceholder.outerHTML = FornapComponents.generateFooter('../');
            }

            setTimeout(() => {
                FornapComponents.initNavbarEvents('../', {
                    onLogin: showLoginModal,
                    onLogout: handleLogout
                });
            }, 100);
        }
    </script>

    <style>
        /* ========================================
           FORNAP JOURNEY EXPERIENCE - CORPORATE DESIGN
           ======================================== */

        /* Variables CSS personnalis√©es */
        :root {
            --warning: #FFC107;
            --warning-bg: #FFF8E1;
        }

        /* BARRE DE PROGRESSION FIXE */
        .progress-container-fixed {
            position: fixed;
            top: 80px;
            left: 0;
            right: 0;
            background: var(--blanc-principal);
            border-bottom: 2px solid var(--noir-principal);
            z-index: 100;
            padding: var(--space-4) 0;
        }

        .journey-progress {
            max-width: 800px;
            margin: 0 auto;
            position: relative;
        }

        .progress-track {
            height: 4px;
            background: var(--gris-clair);
            border-radius: 2px;
            margin-bottom: var(--space-4);
            position: relative;
        }

        .progress-fill {
            height: 100%;
            background: var(--noir-principal);
            border-radius: 2px;
            width: 0%;
            transition: width 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        .progress-indicators {
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
        }

        .progress-indicator {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            background: var(--blanc-principal);
            padding: 0 var(--space-2);
        }

        .indicator-circle {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: var(--gris-clair);
            color: var(--gris-moyen);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: var(--font-bold);
            font-size: var(--text-sm);
            margin-bottom: var(--space-1);
            transition: all 0.3s ease;
        }

        .indicator-label {
            font-size: var(--text-xs);
            color: var(--gris-moyen);
            font-weight: var(--font-medium);
            white-space: nowrap;
        }

        .progress-indicator.completed .indicator-circle {
            background: var(--noir-principal);
            color: var(--blanc-principal);
        }

        .progress-indicator.completed .indicator-label {
            color: var(--noir-principal);
        }

        .progress-indicator.active .indicator-circle {
            background: var(--noir-principal);
            color: var(--blanc-principal);
            transform: scale(1.1);
            box-shadow: 0 0 0 3px rgba(0, 0, 0, 0.1);
        }

        .progress-indicator.active .indicator-label {
            color: var(--noir-principal);
            font-weight: var(--font-bold);
        }

        /* MAIN CONTENT */
        .main-content {
            margin-top: 140px; /* navbar + progress bar */
            min-height: calc(100vh - 140px);
        }

        /* SECTIONS DE PARCOURS */
        .journey-section {
            min-height: calc(100vh - 200px);
            padding: var(--space-12) 0;
            display: flex;
            align-items: center;
        }

        .journey-section.hidden {
            display: none;
        }

        /* SECTION ACCUEIL */
        .welcome-hero {
            text-align: center;
            max-width: 800px;
            margin: 0 auto;
        }

        .welcome-content {
            padding: var(--space-8);
        }

        .hero-title {
            font-size: var(--text-4xl);
            margin-bottom: var(--space-6);
            color: var(--noir-principal);
            line-height: 1.2;
            font-weight: var(--font-bold);
        }

        .hero-highlight {
            background: linear-gradient(120deg, var(--noir-principal) 0%, var(--gris-fonce) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .hero-subtitle {
            font-size: var(--text-xl);
            color: var(--gris-moyen);
            margin-bottom: var(--space-8);
            line-height: 1.6;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .hero-features {
            display: flex;
            justify-content: center;
            gap: var(--space-6);
            margin-bottom: var(--space-12);
            flex-wrap: wrap;
        }

        .feature-chip {
            display: flex;
            align-items: center;
            gap: var(--space-2);
            padding: var(--space-3) var(--space-4);
            border: 2px solid var(--gris-clair);
            background: var(--blanc-principal);
            transition: all 0.3s ease;
            font-weight: var(--font-medium);
        }

        .feature-chip:hover {
            border-color: var(--noir-principal);
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .chip-icon {
            font-size: var(--text-lg);
        }

        .hero-actions {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: var(--space-4);
            max-width: 400px;
            margin: 0 auto;
        }

        .btn-cta {
            background: var(--noir-principal);
            color: var(--blanc-principal);
            transform: scale(1.05);
            box-shadow: var(--shadow-lg);
        }

        .btn-cta:hover {
            transform: scale(1.08) translateY(-2px);
            box-shadow: var(--shadow-xl);
        }

        /* CONTENEURS DE FORMULAIRE */
        .form-container {
            max-width: 600px;
            margin: 0 auto;
            background: var(--blanc-principal);
            border: 2px solid var(--noir-principal);
            padding: var(--space-8);
        }

        .form-header {
            text-align: center;
            margin-bottom: var(--space-8);
        }

        .form-header h2 {
            font-size: var(--text-3xl);
            margin-bottom: var(--space-4);
            color: var(--noir-principal);
            font-weight: var(--font-bold);
        }

        .form-header p {
            color: var(--gris-moyen);
            font-size: var(--text-lg);
        }

        .form-content {
            margin-bottom: var(--space-8);
        }

        .form-field {
            margin-bottom: var(--space-6);
        }

        .form-field label {
            display: block;
            margin-bottom: var(--space-3);
            font-weight: var(--font-medium);
            color: var(--noir-principal);
            font-size: var(--text-lg);
        }

        .form-input {
            width: 100%;
            padding: var(--space-4);
            border: 2px solid var(--gris-clair);
            background: var(--blanc-principal);
            font-size: var(--text-base);
            transition: all 0.3s ease;
            font-family: inherit;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--noir-principal);
            box-shadow: 0 0 0 3px rgba(0, 0, 0, 0.1);
        }

        .form-input-large {
            font-size: var(--text-xl);
            padding: var(--space-6);
            text-align: center;
            font-weight: var(--font-medium);
        }

        .form-actions {
            display: flex;
            justify-content: space-between;
            gap: var(--space-4);
        }

        .form-actions .btn {
            flex: 1;
            max-width: 200px;
        }

        .btn-full {
            width: 100%;
            max-width: none;
        }

        /* √âTAPES D'INSCRIPTION */
        .signup-step:not(.active),
        .know-step:not(.active) {
            display: none;
        }

        /* SECTION FORFAITS */
        .plans-showcase {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: var(--space-6);
            margin-top: var(--space-8);
        }

        .plan-option {
            border: 2px solid var(--gris-clair);
            background: var(--blanc-principal);
            padding: var(--space-6);
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .plan-option:hover {
            border-color: var(--noir-principal);
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        .plan-option.featured {
            border-color: var(--noir-principal);
            transform: scale(1.02);
        }

        .plan-badge {
            position: absolute;
            top: var(--space-3);
            right: var(--space-3);
            background: var(--noir-principal);
            color: var(--blanc-principal);
            padding: var(--space-1) var(--space-3);
            font-size: var(--text-sm);
            font-weight: var(--font-bold);
        }

        .plan-header {
            margin-bottom: var(--space-6);
        }

        .plan-header h3 {
            font-size: var(--text-xl);
            margin-bottom: var(--space-4);
            color: var(--noir-principal);
            font-weight: var(--font-bold);
        }

        .plan-pricing {
            display: flex;
            align-items: baseline;
            justify-content: center;
            gap: var(--space-2);
        }

        .plan-pricing .price {
            font-size: var(--text-4xl);
            font-weight: var(--font-bold);
            color: var(--noir-principal);
        }

        .plan-pricing .currency {
            font-size: var(--text-base);
            color: var(--gris-moyen);
        }

        .plan-benefits {
            text-align: left;
            margin-bottom: var(--space-6);
        }

        .plan-benefits .benefit {
            padding: var(--space-2) 0;
            color: var(--gris-moyen);
            border-bottom: 1px solid var(--gris-tres-clair);
        }

        /* SECTION PAIEMENT */
        .payment-layout {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: var(--space-8);
            align-items: start;
        }

        .order-summary-sidebar {
            position: sticky;
            top: var(--space-8);
        }

        .summary-card {
            background: var(--gris-tres-clair);
            border: 2px solid var(--noir-principal);
            padding: var(--space-6);
        }

        .summary-card h3 {
            margin-bottom: var(--space-4);
            color: var(--noir-principal);
            font-weight: var(--font-bold);
        }

        .plan-details h4 {
            font-size: var(--text-lg);
            margin-bottom: var(--space-2);
            color: var(--noir-principal);
        }

        .plan-cost {
            font-size: var(--text-xl);
            font-weight: var(--font-bold);
            color: var(--noir-principal);
            margin-bottom: var(--space-4);
        }

        .plan-calculation {
            border-top: 1px solid var(--gris-clair);
            padding-top: var(--space-4);
        }

        .calc-line {
            display: flex;
            justify-content: space-between;
            padding: var(--space-1) 0;
            font-size: var(--text-sm);
        }

        .calc-total {
            display: flex;
            justify-content: space-between;
            padding: var(--space-3) 0;
            border-top: 2px solid var(--noir-principal);
            margin-top: var(--space-2);
            font-weight: var(--font-bold);
        }

        .btn-small {
            padding: var(--space-2) var(--space-4);
            font-size: var(--text-sm);
            margin-top: var(--space-4);
        }

        .payment-form-area {
            background: var(--blanc-principal);
            border: 2px solid var(--noir-principal);
            padding: var(--space-8);
        }

        .demo-badge {
            background: var(--warning-bg);
            color: var(--warning);
            padding: var(--space-2) var(--space-4);
            font-size: var(--text-sm);
            font-weight: var(--font-medium);
            display: inline-block;
            margin-top: var(--space-4);
        }

        .payment-methods {
            margin-bottom: var(--space-6);
        }

        .payment-methods h4 {
            margin-bottom: var(--space-4);
            color: var(--noir-principal);
            font-weight: var(--font-bold);
        }

        .method-selector {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--space-4);
        }

        .payment-method {
            position: relative;
            cursor: pointer;
            display: block;
        }

        .payment-method input {
            position: absolute;
            opacity: 0;
            cursor: pointer;
        }

        .method-content {
            display: flex;
            align-items: center;
            gap: var(--space-3);
            padding: var(--space-4);
            border: 2px solid var(--gris-clair);
            background: var(--blanc-principal);
            transition: all 0.3s ease;
        }

        .payment-method:hover .method-content {
            border-color: var(--noir-principal);
        }

        .payment-method.active .method-content {
            border-color: var(--noir-principal);
            background: var(--gris-tres-clair);
        }

        .method-icon {
            font-size: var(--text-xl);
        }

        .method-name {
            font-weight: var(--font-medium);
        }

        .card-form {
            margin-bottom: var(--space-6);
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--space-4);
        }

        .terms-agreement {
            margin-bottom: var(--space-6);
        }

        .checkbox-field {
            display: flex;
            align-items: flex-start;
            gap: var(--space-3);
            cursor: pointer;
            line-height: 1.5;
        }

        .checkbox-field input[type="checkbox"] {
            position: absolute;
            opacity: 0;
            cursor: pointer;
        }

        .checkbox-mark {
            width: 20px;
            height: 20px;
            border: 2px solid var(--gris-clair);
            background: var(--blanc-principal);
            position: relative;
            transition: all 0.3s ease;
            flex-shrink: 0;
            margin-top: 2px;
        }

        .checkbox-field:hover .checkbox-mark {
            border-color: var(--noir-principal);
        }

        .checkbox-field input:checked ~ .checkbox-mark {
            background: var(--noir-principal);
            border-color: var(--noir-principal);
        }

        .checkbox-mark::after {
            content: "";
            position: absolute;
            display: none;
            left: 6px;
            top: 2px;
            width: 6px;
            height: 10px;
            border: solid var(--blanc-principal);
            border-width: 0 2px 2px 0;
            transform: rotate(45deg);
        }

        .checkbox-field input:checked ~ .checkbox-mark::after {
            display: block;
        }

        .checkbox-label {
            color: var(--noir-principal);
        }

        .checkbox-label a {
            color: var(--noir-principal);
            text-decoration: underline;
        }

        /* SECTION F√âLICITATIONS */
        .success-container {
            text-align: center;
            max-width: 800px;
            margin: 0 auto;
            padding: var(--space-8);
        }

        .success-visual {
            margin-bottom: var(--space-8);
        }

        .success-icon {
            width: 120px;
            height: 120px;
            border: 4px solid var(--succes);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto;
            background: var(--blanc-principal);
            font-size: var(--text-4xl);
            color: var(--succes);
            font-weight: var(--font-bold);
        }

        .success-content h1 {
            font-size: var(--text-4xl);
            margin-bottom: var(--space-4);
            color: var(--noir-principal);
            font-weight: var(--font-bold);
        }

        .success-subtitle {
            font-size: var(--text-xl);
            color: var(--gris-moyen);
            margin-bottom: var(--space-8);
        }

        .project-intro {
            margin-bottom: var(--space-12);
        }

        .project-intro h3 {
            font-size: var(--text-2xl);
            margin-bottom: var(--space-6);
            color: var(--noir-principal);
            font-weight: var(--font-bold);
        }

        .intro-features {
            display: grid;
            grid-template-columns: 1fr;
            gap: var(--space-6);
            margin-bottom: var(--space-8);
        }

        .intro-feature {
            display: flex;
            align-items: center;
            gap: var(--space-4);
            padding: var(--space-6);
            border: 2px solid var(--gris-clair);
            background: var(--blanc-principal);
            text-align: left;
        }

        .feature-visual {
            font-size: var(--text-3xl);
            flex-shrink: 0;
        }

        .feature-details h4 {
            margin-bottom: var(--space-2);
            color: var(--noir-principal);
            font-weight: var(--font-bold);
        }

        .feature-details p {
            color: var(--gris-moyen);
            line-height: 1.5;
        }

        /* QUESTIONS DE CONNAISSANCE */
        .choice-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--space-4);
        }

        .choice-option {
            position: relative;
            cursor: pointer;
            display: block;
        }

        .choice-option input {
            position: absolute;
            opacity: 0;
            cursor: pointer;
        }

        .choice-content {
            display: flex;
            align-items: center;
            gap: var(--space-4);
            padding: var(--space-6);
            border: 2px solid var(--gris-clair);
            background: var(--blanc-principal);
            transition: all 0.3s ease;
        }

        .choice-option:hover .choice-content {
            border-color: var(--noir-principal);
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .choice-option input:checked ~ .choice-content {
            border-color: var(--succes);
            background: var(--gris-tres-clair);
        }

        .choice-icon {
            font-size: var(--text-2xl);
        }

        .choice-text {
            font-weight: var(--font-medium);
            color: var(--noir-principal);
        }

        /* SECTION FINALE */
        .final-container {
            text-align: center;
            max-width: 700px;
            margin: 0 auto;
            padding: var(--space-8);
        }

        .final-visual {
            margin-bottom: var(--space-8);
        }

        .final-icon {
            font-size: var(--text-5xl);
            color: var(--succes);
        }

        .final-content h1 {
            font-size: var(--text-4xl);
            margin-bottom: var(--space-6);
            color: var(--noir-principal);
            font-weight: var(--font-bold);
        }

        .final-subtitle {
            font-size: var(--text-lg);
            color: var(--gris-moyen);
            margin-bottom: var(--space-8);
            line-height: 1.6;
        }

        .next-steps {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--space-6);
            margin-bottom: var(--space-12);
        }

        .step-item {
            display: flex;
            align-items: center;
            gap: var(--space-4);
            padding: var(--space-6);
            border: 2px solid var(--gris-clair);
            background: var(--blanc-principal);
            text-align: left;
        }

        .step-icon {
            font-size: var(--text-2xl);
            flex-shrink: 0;
        }

        .step-info strong {
            display: block;
            margin-bottom: var(--space-2);
            color: var(--noir-principal);
        }

        .step-info p {
            color: var(--gris-moyen);
            font-size: var(--text-sm);
        }

        /* MODAL DE CHARGEMENT */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-backdrop {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
        }

        .modal-dialog {
            position: relative;
            max-width: 500px;
            width: 90%;
        }

        .modal-content {
            background: var(--blanc-principal);
            border: 2px solid var(--noir-principal);
            padding: var(--space-8);
            text-align: center;
        }

        .modal-content h3 {
            margin-bottom: var(--space-4);
            color: var(--noir-principal);
            font-weight: var(--font-bold);
        }

        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 4px solid var(--gris-clair);
            border-top: 4px solid var(--noir-principal);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto var(--space-4);
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading-progress {
            margin-top: var(--space-6);
            text-align: left;
        }

        .loading-progress .progress-step {
            padding: var(--space-2) 0;
            color: var(--gris-moyen);
        }

        /* MESSAGES UTILISATEUR */
        #messageContainer {
            position: fixed;
            top: 160px;
            right: var(--space-4);
            z-index: 1001;
        }

        .message {
            padding: var(--space-3) var(--space-4);
            margin-bottom: var(--space-2);
            border: 2px solid;
            background: var(--blanc-principal);
            max-width: 350px;
            font-weight: var(--font-medium);
        }

        .message.success {
            border-color: var(--succes);
            color: var(--succes);
        }

        .message.error {
            border-color: var(--erreur);
            color: var(--erreur);
        }

        .message.warning {
            border-color: var(--warning);
            color: var(--warning);
        }

        .message.info {
            border-color: var(--info);
            color: var(--info);
        }

        /* AM√âLIORATIONS DES BOUTONS */
        .btn {
            transition: all 0.3s ease;
            font-weight: var(--font-medium);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
            transform: none;
        }

        .btn:disabled:hover {
            transform: none;
            box-shadow: none;
        }

        /* RESPONSIVE DESIGN */
        @media (max-width: 768px) {
            .progress-container-fixed {
                padding: var(--space-3) 0;
            }

            .progress-indicators {
                padding: 0 var(--space-4);
            }

            .indicator-label {
                display: none;
            }

            .main-content {
                margin-top: 120px;
            }

            .hero-title {
                font-size: var(--text-3xl);
            }

            .hero-features {
                flex-direction: column;
                align-items: center;
                gap: var(--space-3);
            }

            .hero-actions {
                max-width: none;
            }

            .form-container,
            .payment-form-area {
                padding: var(--space-6);
                margin: 0 var(--space-4);
            }

            .plans-showcase {
                grid-template-columns: 1fr;
                gap: var(--space-4);
            }

            .payment-layout {
                grid-template-columns: 1fr;
                gap: var(--space-6);
            }

            .order-summary-sidebar {
                position: static;
                order: 2;
            }

            .choice-grid {
                grid-template-columns: 1fr;
            }

            .intro-features {
                gap: var(--space-4);
            }

            .intro-feature {
                flex-direction: column;
                text-align: center;
                gap: var(--space-3);
            }

            .next-steps {
                grid-template-columns: 1fr;
                gap: var(--space-4);
            }

            .step-item {
                flex-direction: column;
                text-align: center;
                gap: var(--space-3);
            }

            .method-selector {
                grid-template-columns: 1fr;
            }

            .form-row {
                grid-template-columns: 1fr;
            }

            .form-actions {
                flex-direction: column;
            }

            .form-actions .btn {
                max-width: none;
            }
        }

        @media (max-width: 480px) {
            .journey-progress {
                padding: 0 var(--space-2);
            }

            .hero-title {
                font-size: var(--text-2xl);
            }

            .form-header h2 {
                font-size: var(--text-2xl);
            }

            .form-input-large {
                font-size: var(--text-lg);
                padding: var(--space-4);
            }

            .feature-chip {
                padding: var(--space-2) var(--space-3);
                font-size: var(--text-sm);
            }

            .plan-option {
                padding: var(--space-4);
            }

            .success-container,
            .final-container {
                padding: var(--space-6);
            }
        }

        /* ANIMATIONS D'ENTR√âE */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .journey-section.active {
            animation: fadeInUp 0.6s ease-out;
        }
    </style>

</body>
</html> 